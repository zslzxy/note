# Linux学习笔记

[TOC]

常用命令

- `netstat -an |grep "ESTABLISHED" |wc -1`      统计当前连接的人数；

## 1. Linux 分区

### 1.1 磁盘分区

- **MBR分区表**：主引导记录分区表，最大支持2.1TB硬盘，最多支持四个分区。
- **GPT分区表**：全局唯一标识分区表，支持9.4ZB硬盘，理论上支持分区数量无限制，但是windows中限制128个分区。

### 1.2 格式化

> ​	格式化又称为逻辑格式化，它指的是根据用户选定的文件系统（如：FAT16、FAT32、NTFS、EXT2、EXT3、EXT4等），在磁盘的特定区域写入特定数据，在分区中划出一片用于存放文件分配表、目录表等用于文件管理的磁盘空间。

​	格式化主要的作用就是  **为了写入文件系统**。

## 2 基本配置

### 2.1 配置网卡

1. 安装 vim ： **yum install vim -y**

2. 修改文件： **vim /etc/sysconfig/network-scripts/ifcfg-eth0**

3. 配置文件内容：

   ```shell
   ONBOOT=yes
   BOOTPROTO=static
   DNS=192.168.21.2
   GATEWAY=192.168.21.2
   IPADDR=193.168.21.191
   ```

4.  重新启动Network：**service network restart**

### 2.2 日志介绍

​	在**~**目录中，存在对应的三个log日志文件：

- anaconda-ks.cfg：记录的是图形化安装操作系统的步骤数据，主要**用于服务器批量安装**。
- install.log ： 记录的是安装过的软件安装包的名称，主要是用于记录安装的软件名称。
- install.log.syslog：记录操作的事件的日志，主要是用于记录对用户等操作的记录。

### 2.3 注意事项

- Linux严格区分大小写。
- Linux 中一切皆文件。
- Linux中不能使用扩展名来进行文件类型区分。
- 针对压缩包的命名方式，需要按照不同的压缩规则进行命名，避免不知道什么压缩命令。
- 二进制软件包，也就是.RPM包，通常是需要使用 .rpm 后缀来进行命名。
- Shell脚本文件，一般采用的是 .sh 结尾。
- Linux操作系统远程操作，只能重启，不能关机。服务器远程控制，关机以后可能开机很麻烦。
- 服务器重新启动之前，需要注意事项：
  - 终止正在执行的服务。其主要原因是为了避免出现系统硬件、数据异常。
  - 尽量使用  shutdown 命令执行关机执行令。
  - 尽量在开机之前多执行几次 sync 命令，保证程序的数据的同步。

### 2.4 目录结构

#### 2.4.1 一级目录

- **`/bin`**  存放系统命令的目录，普通用户和超级用户都可以执行。也是 /usr/bin 目录的软连接。
- **`/sbin`** 存放系统命令的目录，只有超级用户才可以执行。是 /usr/bin目录下的软连接。
- **`/usr/bin`** 存放系统命令的目录，普通用户与超级用户都可以执行。 
- **`/usr/sbin`** 存放系统命令的目录 ，只有超级用户才可以执行。
- **`/boot`** 系统启动目录，保存与系统启动相关的文件，如内核文件和启动引导程序等。 
- **`/etc`** 配置文件保存的位置，系统内采用所有默认安装方式（rpm安装）的服务配置文件全部保存在此目录中，如：用户信息、脚本文件、系统配置文件等。 
- **`/dev`** 设备文件保存的位置。
- **`/home`** 普通用户的家目录。在创建用户时，每一个用户需要有一个默认登录和保存自己数据的位置，就是用户的家目录。 
- **`/root`** root用户的家目录。
- **`/lib`** 系统调用的函数库保存位置，是/usr/lib的软连接。
- **`/lib64`** 64位函数库保存位置。是 /usr/lib64文件夹的软连接。 
- **`/media`**  通常不是使用。
- **`/opt`** 第三方软甲你保存的位置。
- **`/proc`** 保存的是内存文件。
- **`/sys`** 保存的是系统的内存、CPU信息等。
- **`/selinux`** 增强Linux安全的文件夹。

#### 2.4.2 二级目录

- **`/usr/lib`** 应用程序调用的函数库保存位置。
- **`/usr/local`** 第三方软件主要的安装目录。
- **`/usr/share`** 应用程序的资源文件保存位置，帮助文档、细节文档等。
- **`/usr/src`** 源码包存放的位置，我们手工下载的源码包和Linux内核源码包都在这里保存。
- **`/var`** 动态数据保存位置。主要保存的是缓存、日志、以及软件运行所产生的文件。
- **`/var/www/html`** RPM包安装Apache的网页的主目录。
- **`/var/log`** 系统日志保存位置。
- **`/var/spool`** 放置队列数据的目录。就是排队等待其他程序使用的数据。
- **`/var/lib`** 程序运行过程中需要调用或者改变的数据保存位置。例如：mysql的数据库存放在/var/lib/mysql中。

## 3 常用命令

### 3.1 命令基本格式

#### 3.1.1 命令提示符

```
[root@localhost ~]#
```

- []  这个是提示符的分隔符号，没有特殊的含义。
- root  表示当前的用户。
- @  表示分隔符号。
- localhost  当前系统的简写主机名，默认完整主机名（localhost.localdomain）。

- ~  代表用户当前所在的目录，此例中用户当前所在的目录是家目录。
- \#  命令提示符， \# 表示的是超级用户， $ 表示的是普通用户。

#### 3.1.2 命令基本格式

> 命令的格式： 命令 [选项] [参数]



### 3.3 基本命令

- **info ls**   查看Linux中文件类型。

- **ls -l**   查看所有文件，附带详情。
  - **ls -li**   查看详情，并显示引用链接数。
  - **ls -a**  查看所有文件，包括隐藏文件。
  - **ls -h**  显示文件所占存储空间的人性化大小。

- **echo 数据  >>  abc.txt**   将数据保存到abc.txt这个文件最后面进行保存。

- **touch  abc.txt**   文件不存在，则创建文件；文件存在，则修改这个文件的时间戳。

- **stat abc.txt**  查看文件的基本信息。

- **cat  [参数]  abc.txt**  查看文件的内容。

  - -n   显示文件的行号。

- **more bac.txt**  分页查看文件中的数据，按空格跳转到下一页，按Q退出。

- **less abc.txt**   分页查看文件中的数据，按上下键进行数据行的上下显示，按Q退出。   

- **head abc.txt**   查看这个文件的前十行。

  - **head -n 7 abc.txt**  查看这个文件的前七行； 

- **tail  abc.txt**  查看文件后十行。

  - **tail -f abc.txt**  监听文件新增的内容，按 ctrl+C退出。
  - **tail -f -n 100 abc.txt**  查看这个文件最后的100行记录，并监听文件新增的内容；

- **ln  /root/abc.txt  /tmp/abc.txt**   为root目录下的abc.txt文件，创建**硬链接**，链接到 tmp目录中的abc.txt。

- **ln -s  /root/cde.txt  /tmp/cde.txt**   为root目录下的cde.txt文件，创建**软链接**，链接到 tmp目录中的cde.txt。

- **rm  [参数] abc.txt**   删除abc.txt。
  -  -f   强制删除。
  -  -i   交互删除，在删除之前会询问用户。
  -  -r  递归删除操作，可以删除目录。 

- **cp  源文件名  目标文件夹+目标文件名**  将源文件进行复制的操作，复制到目标文件夹中，如果重新指定了文件名称，则复制的新文件将以新文件名命名。
  -  -r  递归方式复制。
  -  -d  如果源文件为软链接，则复制出来的目标文件也是软链接。
  -   -i  交互复制，如果目标文件已经存在，则会询问是否覆盖。
  -  -p  复制后目标文件保留原文件的属性（包括所有者、所属组、权限、时间等）。
  -  -a  也就是 -dpr 三者的组合。

- **mv  [参数]  源文件  目标文件夹+目标文件名**   将源文件来进行剪切到对应的目标文件中，也可用于更换名称。
  -  -r  使用递归的方式进行剪切。
  -  -f  强制覆盖，如果目标文件已经存在，则不询问，直接强制覆盖。  
  -  -v  显示详细信息。

- **date**  显示Linux系统当前时间---虚拟机当前时间可能会不准，而且恢复快照也会导致异常。

- 查看系统痕迹命令：

  - **w** 查看系统痕迹---显示正在登陆的用户，以及正在做什么；
  - **who** 也是查看痕迹命令，但是比较简洁---显示正在登陆的用户；
  - **last** 查看历史登录过的信息，包括现在正在登陆的用户信息；
  - **lastlog**  查看系统中所有用户最后的一次登录时间；
  - **lastb**  查看登录错误的日志信息；

- **-print**  打印命令；    例如：   find  /usr/local   -print      打印查询到的数据；

  

### 3.4 链接--ln

#### 3.4.1 硬链接

​	在Linux中的硬链接主要是用于将一个文件关联上其他位置的一个文件，并且对这文件的修改都是实时同步的修改操作。**其实际的原理就是两个都指向了同一个文件**。

​	创建硬链接：

> - 命令： **`ln  源文件名  绝对路径+链接文件名`**
> - 例如： ln  /root/abc.txt  /tmp/abc.txt

​	主要特征包括：

- 源文件和硬链接文件拥有着相同的**Inode**与**Block**。
- 修改任意一个文件，另一个都在改变。
- 删除任意一个文件，另一个都能使用。
- 硬链接标记不清，很难确认硬链接文件位置。
- 硬链接不能链接目录。
- 硬链接不能够跨越分区。

#### 3.4.2 软链接

​	在Linux中的软链接，其原理是：在目标文件中创建一个软链接文件，里面存放的是源文件的Inode数据，软链接根据这个Inode查询到对应的源文件。

​	创建软链接：

> - 命令： **`ln -s 绝对路径+源文件名  绝对路径+链接文件名`**
> - 例如： **`ln -s /root/cde.txt  /tmp/cde.txt `**

​	主要特征包括：

- 软链接和源文件拥有不同的**Inode**与**Block**。
- 两个文件修改任意一个，另一个都改变。
- 删除软链接，源文件不受影响，删除源文件，软链接则不能够在使用。
- 软链接没有实际数据，只**保存源文件的Inode**，不论源文件多大，软链接大小不会改变。
- 软链接的权限最大为 lrwxrwxrwx，但是由于没有实际数据，最终访问时需要参考源文件权限。
- 软链接能够链接目录，跨越分区。
- 软链接特征明显。

### 3.5 netstat 网络控制

对Linux操作系统的网络端口进行操作。

> 命令： netstat  [参数]  [ |  grep  命令2 ]   [ |  grep  命令3 ]  
>
> 参数：
>
> - -a  ：列出所有的网络状态，包括Socket程序
> - -c  秒数 ：指定每隔几秒钟刷新一次
> - -n ：使用IP地址和端口号显示，不使用域名与服务名。
> - -p ：显示PID和程序名
> - -t  ：显示使用tcp协议端口的连接状况
> - -u ：显示使用UDP协议端口的连接状况
> - -l  ：仅显示监听状态的连接
> - -r  ：显示路由表
>
> 例如： netstat  -tuln    查询对应的网络端口信息
>
> ​		netstat  -tunl  |  grep  8080    匹配包含8080端口的数据

### 3.6 常用快捷键

- Ctrl + A   光标快速到行首；
- Ctrl + E   光标快速到行尾；
- Ctrl + C   强制终止当前命令；
- Ctrl + L   清屏操作；
- Ctrl + U  删除或者剪切光标前的命令；
- Ctrl + Y   粘贴Ctrl + U剪切的内容；

### 3.7 alias -- 定义别名

> ​	Linux中可以自定义别名，用于封装用户自己想要的习惯；
>
> 命令： alias   查看系统中的所有别名；
>
> 命令： alias 别名='原始命令'    创建新的别名，别名不能与系统命令相同，否则会覆盖系统命令；
>
> 例如： alias cdip='cd /etc/sysconfig/network-scripts/'    输入 cdip 命令即可跳转到修改ip的文件夹中；
>
> ​		alias ser='service network restart'   输入 ser 命令即可重启网卡；

## 4 Linux权限

### 4.1 文件类型

​	Linux中使用的是权限位的第一位表示文件类型。文件类型主要分为：

-  “-”  普通文件。
- “b”  块设备文件。特殊的设备文件，存储设备也是这种文件。如：文件的分区：/dev/dal
- “c”  字符设备文件。
- “d”  目录文件。Linux中的一切皆文件，所以目录也属于文件中的一种。
- “l”  软链接文件。
- “p”  管道符文件。
- “s”  套接字文件。

### 4.2 权限分类

#### 4.2.1 权限标识

```shell
drwxr-xr-x. 2 root root  4096 4月  10 02:39 mysql
```

- 第一个 字符d  表示的是目录文件。
- 第 2~~4 字符 表示的是用户user拥有的权限，使用字符  **`u`** 表示。
- 第 5~~7 字符 表示的是用户所属组group拥有的权限，使用字符  **`g`** 表示。
- 第 8~~10 字符 表示的是其他用户所拥有的权限，使用字符  **`o`** 表示。

#### 4.2.2 权限对应关系

- **`u`** ：user，对应当前用户。
- **`g`** ：group，对应当前用户组。
- **`o`** ：orther，对应其他用户。
- **`a`** ： all，对应所有的身份。

#### 4.2.3 权限设计

- **`r`** ： read的意思，表示的是具有读的权限。
- **`w`** ： write的意思，表示的是具有写的权限。
- **`x`** ： execue的意思，表示的是具有执行的权限。



### 4.3 权限命令

#### 4.3.1 基本权限命令

> 命令： chmod  [选项]  权限模式  文件名
>
> 例如：
>
> - chmod  u+x  abc.txt    针对abc.txt文件，给当前user添加 x 可执行权限。
> - chmod  u-x,g-w,o-w  abc.txt  针对abc.txt文件，给user减掉 x 执行权限，并给 group、orther减去write权限。
> - chmod  u=rwx,g=rw,o=r  abc.txt  针对文件，使用 = 进行权限赋值。

#### 4.3.2 权限赋予方式

- **` +  -`** ： 使用 + 号与 - 号进行权限的加减。
- **`=`** ： 使用 = 进行权限的赋值操作。

#### 4.3.3 数字权限

- **`4`** ： 代表 **r** 权限。
- **`2`** ： 代表 **w** 权限。
- **`1`** ： 代表 **x** 权限。

> 例如：
>
> - chmod  755  abc.txt   针对abc.txt文件，修改权限为 755.

### 4.4 用户管理

> 添加用户：  adduser  用户名
>
> 修改密码：  passwd   用户名    

### 4.5 用户组管理

> 修改文件的所属用户： chown   用户名   文件名     
>
> ​	例如： chown  user  abc.txt

> 修改文件和目录的所属组与用户：  chown   [选项]   所有者:所属组   文件或者目录
>
> ​	例如： chown  user1:test  abc.txt

### 4.6 umask

​	umask 命令是创建文件、目录时默认的权限控制。

- 对文件来将，创建文件默认的最大权限为666.因为系统为了避免创建的文件拥有可执行的权限，所以默认创建的文件的权限大小为 ：  666 - umask的值后三位。

- 对目录来讲，创建文件默认的最大权限为777.默认创建的目录的权限大小为 ：  777 - umask的后三位。

- 查看umask默认权限值：   输入命令  umask。

### 4.7 帮助命令

#### 4.7.1 man 

​	使用 man 命令能够查询命令的详细介绍。

> ​	命令： **man +  [参数] + [命令]**
>
> ​	例如： **man  ls** 

#### 4.7.2 whatis  

​	使用 whatis命令查询对应的命令详情。

> ​	命令： **whatis  +  [命令]**
>
> ​	例如： **whatis  ls**

#### 4.7.3 info

​	使用info来查询对应的命令。

> 操作info的快捷键：
>
> - 上箭头 ： 上移一行
> - pageUp：翻向上一页
> - pageDown：翻向下一页
> - u ： 进入上一层信息
> - n ： 进入下一小节
> - p ： 进入上一小节
> - q ： 退出
>
> 命令： **info  {命令]**

#### 4.7.4 help命令

​	help能够获取Shell内置命令的帮助。

#### 4.7.5 --help 命令

> 命令：  命名  +  --help

### 4.8 搜索命令

#### 4.8.1 whereis 命令

​	whereis 命令是搜索系统命令的命令，也就是说whereis命令不能够搜索普通文件，只能搜索系统命令。

​	whereis查找二进制命令的同时，查找到帮助文档的位置。

#### 4.8.2 which 命令

​	which是查找系统命令的命令，当命令存在对应的别名，则可以查找到其别名。

#### 4.8.3 locate 命令

​	使用**locate命令能够按照数据库进行搜索，只能搜素文件名**，搜索速度快，消耗资源小。搜索的数据库位置处于： /var

> 安装： 
>
> - 第一步：yum  install  mlocate  -y    安装软件
> - 第二步： updatedb     更新数据库
>
> 命令： locate  +  搜索名
>
> 例如： locate  ls

#### 4.8.4 find 命令

- **按照文件名搜索**

> 命令： find   + 搜索路径  + [选项]  搜索内容
>
> 选项：
>
> ​	-name ： 按照文件名搜索，是完全匹配；如果需要模糊匹配，可采用通配符；
>
> ​	-iname ： 按照文件名搜索，并且不区分大小写
>
> ​	-inum ： 按照Inode号进行搜索
>
> 例如： find  .  -name   abc.txt     按照名称查询当前路径下的abc.txt文件是否存在。

- **按照文件大小搜索**

> 命令： find  +  搜索路径  +  [选项]  +  搜索内容
>
> 选项：
>
> ​	-size  [+/-]   数据大小  ： 按照指定大小来进行搜索 
>
> ​		 +表示比指定的数据大小更大的。
>
> ​		 -表示比指定的数据大小更小的。
>
> 例如： 
>
> find . -size -28M   查询当前路径下比 28兆 更小的文件。
>
> find  .  -size  27c   查询27字节的文件。

- **按照文件修改时间**

> 简介：Linux 中的文件有访问时间（atime），数据修改时间（mtime），状态修改时间（ctime）三个时间。
>
> 命令：find  + 搜索路径  +  [选项]  +  搜索内容
>
> 选项：
>
> ​	-atime [+/-]  时间： 按照文件访问时间进行搜索。
>
> ​	-mtime [+/-]  时间： 按照文件数据修改时间搜索。
>
> ​	-ctime [+/-]  时间：按照文件状态修改时间搜索。
>
> - \- 5 表示5天内修改的文件。
> -  5 表示5-6天内修改的文件。
> -  \+ 5 表示6天前修改的文件。

- **按照权限搜索**

> 命令： find  +  [搜索路径]  +  [选项]  +  搜索内容
>
> 选项：
>
> ​	-perm  权限模式： 查找文件权限刚好等于 “权限模式” 的文件。
>
> ​	-perm  -权限模式：查找文件权限全部包含“权限模式”的文件。
>
> ​	-perm  +权限模式：查找文件权限包含“权限模式”的任意一个权限的文件。
>
> 例如：find  .  -perm  +444

- **按照所有者所属组搜索**

> 命令： find  +  搜索路径  +  [选项]  +  搜索内容
>
> 选项：
>
> ​	-uid  用户id：按照用户id查询是指定所有者id的文件。
>
> ​	-gid  组id：按照用户组id查找所属组是指定id的文件。
>
> ​	-user  用户名： 查找对用用户名的文件。
>
> ​	-group 组名 ： 查找对应组的文件。
>
> ​	-nouser ： 查找没有所有者的文件。 

- **按照文件类型搜索**

>命令： find  +  搜索路径  +  [选项]  +  搜索内容
>
>选项：
>
>​	-type  d ： 查找目录
>
>​	-type  f  ： 查找普通文件
>
>​	-type  l  ： 查找软链接文件

#### 4.8.5 find + 逻辑运算符

> 命令 ： find  +  搜索路径  +  [选项]  +  搜索内容
>
> 选项：
>
> ​	-a ： and逻辑与运算。
>
> ​	-o ： or逻辑或运算。
>
> ​	-not ： not逻辑非运算。
>
> 例如： find  .  -name  abc.txt  -o  -name  bdc.txt 

#### 4.8.6 find/ok + exec

> 命令： find/ok  +  [搜索路径]  +  [选项]  搜索内容  -exec  命令2  {}  \ 
>
> 简介： 先执行前面搜索内容的操作，将得到的结果作为参数 加入到 命令2的 {} 中。
>
> 例如： find  .  -name  abc.txt  -a  -size -28M  -exec ls  -l  {}  \ ;  查找到对应的文件，并使用ls查看详情。

#### 4.8.7 find + 通配符 查找

> 命令： find  + 搜索路径 + [选项] + "通配符表达式"
>
> 简介：find使用name查找的时候，是完全匹配，但是如果需要模糊匹配的话，则可以采用通配符；
>
> 例如：find .  -name "abc*"   查找到名字以abc开头的文件；
>
> 注意事项： 使用通配符的时候，`需要将这个表达式加入到通配符中`；
>
> | 通配符 | 作用                                                         |
> | ------ | ------------------------------------------------------------ |
> | ?      | 匹配一个任意字符                                             |
> | *      | 匹配0个或者任意多个任意字符                                  |
> | []     | 匹配中括号中任意一个字符；例如: [abc] 表示可以匹配a或者b或者c任意一个字符都可以 |
> | [-]    | 匹配中括号区间内任意一个字符；例如: [a-z]表示可以匹配从a-z中的任意一个字符 |
> | [^]    | 逻辑非，表示匹配不是中括号内的一个字符；例如: \[^0-9\] 表示不属于0-9中的任意一个 |

### 4.9 grep命令：补充命令

​	grep 的作用是 **在文件中提取和匹配符合条件的字符串行** ；也就是说：进行文件内容的匹配操作；

> 命令 ： grep  +  [选项]  +  "搜索内容"  +  文件名
>
> 选项：
>
> ​	-i ： 忽略大小写。
>
> ​	-n： 输出行号。
>
> ​	-v ： 反向查找。
>
> ​	--color=auto：搜索出的关键字用颜色表示。	

​	find命令是专注于查找文件或者目录，而grep命令则是专注于匹配文件中的字符串。



### 4.10 管道符--补充命令

> 命令：  命令1  |   命令2
>
> 解释：   命令1操作的结果为命令2操作的数据对象
>
> 例如：  ll -a  /etc/   |   more

> 命令：  命令1  |  grep  命令2
>
> 解释：   命令1操作的结果为命令2操作的数据对象
>
> 例如：  ll -a  /etc/   |   more  ls

## 5 压缩与解压缩

### 5.1 zip格式

#### 5.1.1 zip命令--压缩

> 命令： zip  [选项]  压缩包名  源文件或者源目录
>
> 选项： 
>
> - -r  ： 压缩目录

#### 5.1.2 unzip命令--解压

> 命令： unzip  [选项]  压缩包名
>
> 选项：
>
> - -d ：指定解压缩位置
>
> 例如： unzip  -d  /usr/local/  ana.zip

### 5.2 gz格式--不会打包

#### 5.2.1 gzip命令--压缩

> 命令： gzip  [选项]  源文件
>
> 选项：
>
> - -c ： 将压缩数据输出到标准输出中， 可以用以保留源文件
> - -d ： 解压缩
> - -r  ：压缩目录
>
> 例如： gzip  ABC      将ABC 文件压缩为ABC.gz

#### 5.2.2 gunzip命令--解压

> 命令： gunzip  压缩文件
>
> 例如： gunzip  abc.gz 

### 5.3 bz2格式--不能压缩目录

#### 5.3.1 bzip2 命令--压缩

> 命令：bzip2  [选项]  源文件
>
> 选项：
>
> - -d ：解压缩
> - -k  ：压缩时，保留源文件
> - -v ：显示压缩的详细信息
>
> 例如： bzip2  -k   ABC.txt

#### 5.3.2 bunzip2命令--解压

> 命令： bunzip2  压缩包名
>
> 例如： bunzip2  ABC.bz

### 5.4 .tar 格式--打包不压缩

#### 5.4.1 tar命令--压缩

> 命令： tar  [选项]  [-f  压缩包名]  源文件或者目录
>
> 选项：
>
> - -c ： 压缩。
> - -f ： 指定压缩包的文件名。
> - -v ： 显示打包文件过程。
> - -C ：指定解压目录，放在最后面
>
> 例如： tar  -cvf  abc.tar  ABC   -C  /tmp

#### 5.4.2 tar命令--解压

> 命令： tar  [选项]  压缩包
>
> 选项：
>
> - -x ： 解打包
> - -f ： 指定压缩包的文件名。
> - -v ： 显示解压的过程。
> - -t ： 查看压缩包中存在的文件。
>
> 例如： tar  -xvf  ABC.tar

### 5.5 .tar.gz格式--打包压缩

> 命令： tar  [选项]  压缩包名  源文件或者目录
>
> 选项：
>
> - -z ： 压缩与解压缩
>
> 例如： tar  -zxvf  ABC  ABC.tar.gz   解压
>
> 例如： tar  -zcvf  ABC  ABC.tar.gz   压缩

### 5.6 .tar.bz2格式--打包压缩

> 命令： tar  [选项]  压缩包名  源文件或者目录
>
> 选项：
>
> - -j ： 压缩与解压缩
>
> 例如： tar  -jxvf  ABC  ABC.tar.bz2  -C    解压
>
> 例如： tar  -jcvf  ABC  ABC.tar.bz2   压缩

## 6 关机重启

### 6.1 sync数据同步

> ​	sync数据命令是将内存中还未保存的数据，提醒系统快快保存。

### 6.2 shutdown 命令

> ​	shutdown命令是用于重启Linux操作系统。
>
> - 所需权限： 超级用户
>
> 命令： shutdown  [选项]  时间  [警告信息]
>
> 选项：
>
> - -c ：取消已经执行的shutdown 命令。
> - -h ：关机
> - -r ： 重启

### 6.3 reboot命令

> reboot 命令是直接进行重启操作。

## 7 系统痕迹

> ​	系统中存在一些重要的痕迹日志文件，如/var/log/wtmp，/var/run/utmp等目录中的日志文件，使用普通的vim查看日志文件，则出现的是二进制乱码，能够使用命令查看对应的日志数据。

### 7.1 w 命令

> 简介：w命令是用于显示系统中正在登陆的用户信息的命令，这个日志命令查看的是/var/run/utmp目录。
>
> 命令： w
>
> 执行权限：所有用户。
>
> 功能描述：显示登陆用户，以及用户正在操作的内容。

### 7.2 who 命令

> who命令和w命令类似，查看正在登陆的用户，显示内容更加简洁。
>
> 命令： who

### 7.3 last 命令

> last命令是查看系统所有登陆过的用户信息，包括正在登陆的用户和之前登陆的用户。
>
> 命令： last

### 7.4 lastlog 命令

> lastlog命令是查看系统中所有用户最后一次登录时间的命令。查看的是/var/log/lastlog文件。
>
> 命令： lastlog

### 7.5 lastb 命令

> lastb命令是查看错误登录的信息，查看的是/var/log/btmp文件。
>
> 命令： lastb

## 8 挂载命令

### 8.1 mount 命令

> linux所有存储设备都必须挂载使用，包括硬盘。
>
> 命令： mount  [选项]
>
> 选项：
>
> - -t ：文件系统，加入文件系统类型来指定挂载的类型，例如：ext4、ext3等
> - -L： 卷标名，挂载指定卷标的分区，而不是安装设备文件名挂载。
> - -o ：可以指定挂载的额外选项，如读写权限、同步异步等。
>
> 执行权限： 所有用户
>
> 例如：
>
> - amount ：查看文件系统中已经挂载的文件系统。

### 8.2 挂载U盘



## 9. Linux对时

> ​	Linux中查看**系统时间**的命令是：
>
> 命令： `date`    查看当前系统时间；
>
> 命令：  `date -s "需要设定的时间"`  修改当前系统时间为 输入的时间；
>
> 例如： date -s "2019-10-31 11:22:33"

> ​	Linux中查看**硬件时间**的命令是：
>
> 命令： `clock --show`    查看系统硬件时间；

> 命令： `clock -w `    将系统时间同步给硬件时间；
>
> 命令：`hwclock -s`     将硬件时间同步给系统时间；

> 同步时间步骤：
>
> - `yum install -y ntp`    安装ntp同步时间工具；
> - `service ntpd restart`   启动ntp；
> - `chkconfig ntpd on`   开机自启动；
> - `clock -w`   将系统时间同步到硬件时间；

## 10. RPM包管理

### 10.1 光盘介绍

> ​	在Linux中，每次下载光盘都会有两个文件，CentOS-6.8-x86_64-bin-DVD1.iso 与 CentOS-6.8-x86_64-bin-DVD2.iso文件；在这两个文件中，存在一个文件夹，叫做 packages，该文件夹存放的就是所有的RPM包；
> ​	RPM包也称为二进制包；
>
> ​	YUM包也仅仅是RPM包在线安装的一种方式，所以都是叫RPM包；
>
> ​	所有安装过的RPM包，都有对应的数据库进行保存，在 ( /var/lib/rpm )中；

### 10.2 RPM包安装

> 命令： **rpm -ivh 包全名**
>
> 注意： 一定需要包的全名，包括安装包的所在绝对路径；
>
> 选项：
>
> - -i   install安装（install）；
> - -v  显示详细的信息（verbose）；
> - -h  打印/显示安装进度（hash）；
> - --prefix  指定安装路径，如果不指定对应的路径，则会安装在默认路径中（建议不指定位置）；
> - --nodeps  不检测依赖性安装；
> - --replicefiles  替换文件安装；
> - --force  强制安装；
> - --test   测试安装，不会实际安装，只会检测依赖性；
>
> 例如：安装apache： rpm -ivh  httpd-2.2.15-53.el6.centos.x86_64.rpm   ，出现报错：则需要循环递归安装其他的依赖：
>
> ![1572958634214](assets/1572958634214.png)
>
> 最后：![1572958777981](assets/1572958777981.png)
>
> 需要的是 出现两个 100% 才表示安装成功，否则都是表示未安装成功；

### 10.3 RPM包默认安装位置

| 路径            | 意义                       |
| --------------- | -------------------------- |
| /etc/           | 配置文件安装目录           |
| /usr/bin/       | 可执行的命令安装目录       |
| /usr/share/doc/ | 基本的软件使用手册保存位置 |
| /usr/share/man/ | 帮助文件保存位置           |

#### 10.4 服务启动

> 命令： service  服务名  start | stop | restart | status
>
> 参数：
>
> - start ： 启动服务
> - stop ： 停止服务
> - restart ： 重启服务
> - status ： 查看服务状态

### 10.3 RPM包升级

> 命令： rpm  -Uvh  包全名
>
> 选项：
>
> - -U ： 升级安装，如果没有安装过，系统直接安装；如果安装过旧版本，则升级到新的版本；



> 命令： rpm  -Fvh  包全名
>
> 选项：
>
> - -F ： 升级安装，如果没有安装过，则不会安装；必须安装有旧版本，才能升级（freshen）；

### 10.6 RPM包卸载

> 命令： rpm -e  包名
>
> 选项：
>
> - --nodeps ： 不检查依赖性
> - -e ： 卸载

### 10.7 RPM包查询

> 

### 10.8 yum命令

#### 10.8.1 yum查询

> - **yum list**   查询yum源服务器上所有可安装的软件包列表；
>
> -  **yum list 包名**   查询yum服务器上所有和关键字相关的软件包；
> - **yum search 关键字**   搜索yum服务器上所有和关键字相关的软件包；
> - **yum info 包名**   查询指定软件包信息；
> - **yum install -y 包名**  安装yum包；
> - **yum -y update 包名**   升级yum包；
> - **yum remove 包名**   卸载指定的软件包；

#### 10.8.2 yum组管理命令

> - **yum grouplist**   列出所有可用的软件组列表；
> - **yum groupinfo 软件组名**   列出软件组中包含的软件；
> - **yum groupremove 软件组名**   卸载指定软件组；

### 10.9 源码包安装

> 步骤：
>
> 1. 下载源码软件包；
> 2. 解压缩；
> 3. 进入解压目录；
> 4. ./configure  编译前准备；
>    1. 在安装之前检测系统环境是否符合安装要求；
>    2. 定义需要的功能选项； “./configure”支持的功能选项较多，
>       - 可以执行“./configure --help”命令个查询其支持的功能； 
>       - 可以执行 “./configure --profix=安装路径” 来指定安装路径；
>       - 把系统环境的检测结果过和定义好的功能写入到Makefile文件中，后续的编译和安装需要依赖这个文件的内容；
>
> 注意事项：
>
> ​	configure 命令不是系统命令，而是源码包软件自带的一个脚本程序，所有必须采用“./configure”方式执行；



> - **./configure**  编译前的准备工作，将检测好的功能选项写入到Makefile文件中；可指定编译路径；
> - **make**    编译，会调用gcc编译器，读取Makefile文件中的信息进行系统软件编译；编译的目的是将源码程序转换为能被linux识别的可执行文件，并保存在当前目录中；
> - **make clean**  清空编译内容；如果在 “./configure” 命令或者 “make” 命令执行过程中报错，那么在重新执行之前需要执行该命令，会清空Makefile文件或编译产生的“.o”头文件；
> - **make install**  安装；
> - 删除： 源码包是没有删除命令的，直接删除安装目录即可实现删除功能；

## 11. 用户管理

### 11.1 用户相关文件

#### 11.1.1 /etc/passwd 用户信息文件

> ![1574085056955](assets/1574085056955.png)
>
> - 第一列：用户名
> - 第二列：密码位
> - 第三列：用户ID
>   - **0**   超级用户的UID，如果用户的UID为0，那么久表示该账号是管理员账号，具有管理员权限；
>   - **1-499**  系统用户（伪用户）的UID；这些UID账号是系统保留给系统用户的UID，也就是说：该账号是无法登录的，只是用于运行系统服务；
>     - **1-99**  系统保留的账号，系统自动创建；
>     - **100-499**  预留给用户创建系统账号；
>   - **500-60000**  普通用户的UID；
> - 第四列：组ID；GID添加用户时，如果不指定用户所属的初始组，那么就会建立和用户名相同的组；
> - 第五列：用户说明；
> - 第六列：用户家目录；
> - 第七列：登录shell  /bin/bash
>
> 注意：如何将一个用户变成超级管理员？
>
> ​	修改 /etc/passwd 文件，将用户的UID设定为 0 即可；
>
> ​	Windows中修改用户权限为管理员，是将权限绑定到用户组中的，所以需要将用户加入Administrator；

#### 11.1.2 /etc/shadow   影子文件

> ![1574086408138](assets/1574086408138.png) 
>
> 第一列： 用户名；
>
> 第二列： 加密密码；
>
> - 可以使用人为的方式在前面加入 "!" 或者 "*" 改变加密值让密码暂时失效，使这个用户无法登陆；
> - 所有的伪用户的密码都是 "!!" 或者 "*" ，代表没有密码或者不能登陆；当创建一个新的用户如果不设定密码，它的密码项也是 "!!"，代表这个用户没有密码，不能登陆；
>
> 第三列：密码最近改变时间，1970年1月1日作为标准时间；
>
> 第四列：两次密码的修改间隔时间；
>
> 第五列：密码有效期；
>
> 第六列：密码修改到期前的警告天数；
>
> 第七列：密码过期后的宽限天数；
>
> 第八列：密码失效时间；
>
> 第九列：暂时保留；

#### 11.1.3 /etc/group  组信息文件

> ![1574086830840](assets/1574086830840.png) 
>
> 第一列：组名；
>
> 第二列：组密码位；
>
> 第三列：GID；
>
> 第四列：此组中支持的其他用户，附加组是此组的用户；
>
> 初始组：每个用户初始组只能有一个；
>
> 附加组：每个用户可以属于多个附加组；

### 11.2 用户管理命令

#### 11.2.1 添加用户

> 命令： **useradd  选项  用户名**
>
> 选项：
>
> - **-u**   550   指定UID；
> - **-g**   组名  指定初始组；
> - **-G**   组名  指定附加组；
> - **-c**    说明  添加说明；
> - **-d**    目录  手工指定家目录，目录不需要事先建立；
>   - **-s**    shell   /bin/bash















